# subgraphs in the supergraph
# are first deployed so they're running in your environment

# then published to the Apollo Registry to indicate they're ready to serve requests
# - supergraph CI: composes the subgraphs into a supergraph schema
# - supergraph CD: feeds new supergraph schema to the Apollo Router via Apollo Uplink polling every few seconds

# 'make demo' to get started
# then run 'make smoke' in separate window
# or open http://localhost:4000 to use Apollo Sandbox to issue queries

version: '3'
services:
  products:
    container_name: products
    build: ./subgraphs/products
    ports:
      - "4001:4000"
  inventory:
    container_name: inventory
    build: ./subgraphs/inventory
    ports:
      - "4002:4000"
  users:
    container_name: users
    build: ./subgraphs/users
    ports:
      - "4003:4000"
  pandas:
    container_name: pandas
    build: ./subgraphs/pandas
    ports:
      - "4004:4000"
  reviews:
    container_name: reviews
    build: ./subgraphs/reviews
    ports:
      - "4005:4000"
